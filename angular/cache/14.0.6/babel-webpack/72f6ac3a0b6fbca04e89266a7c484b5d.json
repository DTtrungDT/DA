{"ast":null,"code":"import _asyncToGenerator from \"D:/Code PJ/SocialNetworkWebApp/SocialNetworkWebApp-FE/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { firstValueFrom } from 'rxjs';\nimport { Friendship } from 'src/app/models/friendship.model';\nimport { User } from 'src/app/models/user.model';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"src/app/services/user.service\";\nimport * as i3 from \"src/app/services/friendship.service\";\nimport * as i4 from \"src/app/services/relation.service\";\nimport * as i5 from \"@angular/common\";\n\nfunction FriendCardComponent_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\")(1, \"span\", 8);\n    i0.ɵɵlistener(\"click\", function FriendCardComponent_div_9_Template_span_click_1_listener() {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.onAddFriendButtonClick());\n    });\n    i0.ɵɵelement(2, \"i\", 9);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"classList\", ctx_r0.icons[ctx_r0.relationIndex]);\n  }\n}\n\nexport class FriendCardComponent {\n  constructor(router, userService, friendshipService, relationService) {\n    this.router = router;\n    this.userService = userService;\n    this.friendshipService = friendshipService;\n    this.relationService = relationService;\n    this.showFriendButton = true;\n    this.user = new User();\n    this.icons = ['uil uil-user-plus', \"uil uil-user-times\", 'uil uil-user-check', \"uil uil-ban\", 'uil uil-user-exclamation'];\n    this.relationIndex = 0;\n  }\n\n  ngOnInit() {\n    this.friendship = Object.assign(new Friendship(), this.friendship);\n    let id = this.friendship.userId === this.currentUser.id ? this.friendship.friendId : this.friendship.userId;\n    this.userService.getById(id).subscribe(data => this.user = data);\n    this.getRelationship(false);\n  }\n\n  getRelationship(update) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      if (update) {\n        _this.friendship = yield firstValueFrom(_this.relationService.getRelationshipBetweenUsers(_this.user.id, _this.currentUser.id));\n      }\n\n      _this.relationIndex = _this.friendship.status !== null ? _this.friendship.status + 1 : 0;\n\n      if (_this.relationIndex === 1 && _this.friendship.friendId === _this.currentUser.id) {\n        _this.relationIndex = 4;\n      }\n    })();\n  }\n\n  onAddFriendButtonClick() {\n    switch (this.relationIndex) {\n      case 0:\n        {\n          this.addFriend();\n          break;\n        }\n\n      case 1:\n      case 2:\n      case 3:\n        {\n          this.unFriend();\n          break;\n        }\n\n      case 4:\n        {\n          this.navigateToWall();\n          break;\n        }\n\n      default:\n        break;\n    }\n  }\n\n  addFriend() {\n    if (this.currentUser) {\n      let newFriendship = new Friendship();\n      newFriendship.status = 0;\n      newFriendship.userId = this.currentUser.id;\n      newFriendship.friendId = this.user.id;\n      this.friendshipService.add(newFriendship).subscribe(data => this.relationIndex = 1);\n    }\n  }\n\n  unFriend() {\n    if (this.friendship) {\n      this.friendshipService.delete(this.friendship.id).subscribe(data => this.relationIndex = 0);\n    }\n  }\n\n  navigateToWall() {\n    if (this.currentUser) {\n      this.router.navigateByUrl(`home/wall/${this.user.id}`);\n    }\n  }\n\n}\n\nFriendCardComponent.ɵfac = function FriendCardComponent_Factory(t) {\n  return new (t || FriendCardComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.UserService), i0.ɵɵdirectiveInject(i3.FriendshipService), i0.ɵɵdirectiveInject(i4.RelationService));\n};\n\nFriendCardComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: FriendCardComponent,\n  selectors: [[\"app-friend-card\"]],\n  inputs: {\n    friendship: \"friendship\",\n    currentUser: \"currentUser\",\n    showFriendButton: \"showFriendButton\"\n  },\n  decls: 10,\n  vars: 4,\n  consts: [[1, \"friend-card\"], [1, \"profile\"], [1, \"profile-picture\"], [\"alt\", \"\", 3, \"src\", \"click\", \"error\"], [1, \"info\"], [1, \"text-bold\", 3, \"click\"], [1, \"text-muted\"], [4, \"ngIf\"], [1, \"btn\", 3, \"click\"], [3, \"classList\"]],\n  template: function FriendCardComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"img\", 3);\n      i0.ɵɵlistener(\"click\", function FriendCardComponent_Template_img_click_3_listener() {\n        return ctx.navigateToWall();\n      })(\"error\", function FriendCardComponent_Template_img_error_3_listener() {\n        return ctx.user.getDefaultAvatar();\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(4, \"div\", 4)(5, \"div\", 5);\n      i0.ɵɵlistener(\"click\", function FriendCardComponent_Template_div_click_5_listener() {\n        return ctx.navigateToWall();\n      });\n      i0.ɵɵtext(6);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(7, \"div\", 6);\n      i0.ɵɵtext(8);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵtemplate(9, FriendCardComponent_div_9_Template, 3, 1, \"div\", 7);\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"src\", ctx.user.getAvatar(), i0.ɵɵsanitizeUrl);\n      i0.ɵɵadvance(3);\n      i0.ɵɵtextInterpolate(ctx.user.getFullName());\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate1(\"@\", ctx.user.getEmailPrefix(), \"\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.showFriendButton);\n    }\n  },\n  dependencies: [i5.NgIf],\n  styles: [\"*[_ngcontent-%COMP%], *[_ngcontent-%COMP%]::before, *[_ngcontent-%COMP%]::after {\\r\\n    margin: 0;\\r\\n    padding: 0;\\r\\n    outline: 0;\\r\\n    box-sizing: border-box;\\r\\n    text-decoration: none;\\r\\n    list-style: none;\\r\\n    border: none;\\r\\n\\r\\n    font-family: 'Roboto', sans-serif, Arial, Helvetica;\\r\\n}\\r\\n\\r\\n\\r\\n\\r\\n.btn[_ngcontent-%COMP%] {\\r\\n    display: inline-block;\\r\\n    padding: var(--btn-padding);\\r\\n    font-weight: 500;\\r\\n    border-radius: var(--border-radius);\\r\\n    cursor: pointer;\\r\\n    transition: all 300ms ease;\\r\\n    font-size: 0.9rem;\\r\\n}\\r\\n\\r\\n\\r\\n\\r\\n.btn[_ngcontent-%COMP%]:hover, .profile-picture[_ngcontent-%COMP%]:hover {\\r\\n    opacity: 0.75;\\r\\n}\\r\\n\\r\\n\\r\\n\\r\\n.btn-primary[_ngcontent-%COMP%] {\\r\\n    background-color: var(--color-primary);\\r\\n    color: white;\\r\\n}\\r\\n\\r\\n\\r\\n\\r\\n.btn-success[_ngcontent-%COMP%] {\\r\\n    background-color: rgb(0, 175, 0);\\r\\n    color: white;\\r\\n}\\r\\n\\r\\n\\r\\n\\r\\n.profile-picture[_ngcontent-%COMP%] {\\r\\n    width: 2.7rem;\\r\\n    height: 2.7rem;\\r\\n    border-radius: 50%;\\r\\n    overflow: hidden;\\r\\n    cursor: pointer;\\r\\n    transition: all 300ms ease;\\r\\n\\r\\n    img {\\r\\n        width: 100%;\\r\\n        height: 100%;\\r\\n        object-fit: cover;\\r\\n    }\\r\\n}\\r\\n\\r\\n\\r\\n\\r\\n.friend-card[_ngcontent-%COMP%] {\\n  display: flex;\\n  border-radius: var(--card-border-radius);\\n  background-color: var(--color-white);\\n  padding: var(--card-padding);\\n  justify-content: space-between;\\n  align-items: center;\\n  margin-bottom: 1rem;\\n}\\r\\n\\r\\n\\r\\n\\r\\n.friend-card[_ngcontent-%COMP%]   .profile[_ngcontent-%COMP%] {\\n  display: flex;\\n  gap: 1rem;\\n  align-items: center;\\n  font-size: 1rem;\\n}\\r\\n\\r\\n\\r\\n\\r\\n.friend-card[_ngcontent-%COMP%]   .profile[_ngcontent-%COMP%]   .profile-picture[_ngcontent-%COMP%] {\\n  border-radius: 0.5rem;\\n  border: 1px solid var(--color-dark);\\n  width: 5rem;\\n  height: 5rem;\\n}\\r\\n\\r\\n\\r\\n\\r\\n.friend-card[_ngcontent-%COMP%]   .profile[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%] {\\n  cursor: pointer;\\n  transition: 300ms;\\n}\\r\\n\\r\\n\\r\\n\\r\\n.friend-card[_ngcontent-%COMP%]   .profile[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]:hover {\\n  opacity: 0.75;\\n}\\r\\n\\r\\n\\r\\n\\r\\n.friend-card[_ngcontent-%COMP%]   .profile[_ngcontent-%COMP%]   .text-muted[_ngcontent-%COMP%] {\\n  font-size: 0.85rem;\\n}\\r\\n\\r\\n\\r\\n\\r\\n.btn[_ngcontent-%COMP%] {\\n  background-color: var(--color-light);\\n  border-radius: 50%;\\n  padding: 0.3rem 0.5rem;\\n  font-size: 2rem;\\n  color: var(--color-dark);\\n  font-weight: 500;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3N0eWxlcy5zY3NzIiwiZnJpZW5kLWNhcmQuY29tcG9uZW50LnNjc3MiLCIuLlxcLi5cXC4uXFwuLlxcLi5cXC4uXFwuLlxcQ29kZSUyMFBKXFxTb2NpYWxOZXR3b3JrV2ViQXBwXFxTb2NpYWxOZXR3b3JrV2ViQXBwLUZFXFxzcmNcXGFwcFxcY29tcG9uZW50c1xcZnJpZW5kLWNhcmRcXGZyaWVuZC1jYXJkLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7SUFHSSxTQUFTO0lBQ1QsVUFBVTtJQUNWLFVBQVU7SUFDVixzQkFBc0I7SUFDdEIscUJBQXFCO0lBQ3JCLGdCQUFnQjtJQUNoQixZQUFZOztJQUVaLG1EQUFtRDtBQUN2RDs7OztBQUlBO0lBQ0kscUJBQXFCO0lBQ3JCLDJCQUEyQjtJQUMzQixnQkFBZ0I7SUFDaEIsbUNBQW1DO0lBQ25DLGVBQWU7SUFDZiwwQkFBMEI7SUFDMUIsaUJBQWlCO0FBQ3JCOzs7O0FBRUE7O0lBRUksYUFBYTtBQUNqQjs7OztBQUVBO0lBQ0ksc0NBQXNDO0lBQ3RDLFlBQVk7QUFDaEI7Ozs7QUFFQTtJQUNJLGdDQUFnQztJQUNoQyxZQUFZO0FBQ2hCOzs7O0FBRUE7SUFDSSxhQUFhO0lBQ2IsY0FBYztJQUNkLGtCQUFrQjtJQUNsQixnQkFBZ0I7SUFDaEIsZUFBZTtJQUNmLDBCQUEwQjs7SUFFMUI7UUFDSSxXQUFXO1FBQ1gsWUFBWTtRQUNaLGlCQUFpQjtJQUNyQjtBQUNKOzs7O0FDcERBO0VBQ0ksYUFBQTtFQUNBLHdDQUFBO0VBQ0Esb0NBQUE7RUFDQSw0QkFBQTtFQUNBLDhCQUFBO0VBQ0EsbUJBQUE7RUFDQSxtQkFBQTtBQ0FKOzs7O0FERUk7RUFDSSxhQUFBO0VBQ0EsU0FBQTtFQUNBLG1CQUFBO0VBQ0EsZUFBQTtBQ0FSOzs7O0FERVE7RUFDSSxxQkFBQTtFQUNBLG1DQUFBO0VBQ0EsV0FBQTtFQUNBLFlBQUE7QUNBWjs7OztBREdRO0VBQ0ksZUFBQTtFQUNBLGlCQUFBO0FDRFo7Ozs7QURHWTtFQUNJLGFBQUE7QUNEaEI7Ozs7QURLUTtFQUNJLGtCQUFBO0FDSFo7Ozs7QURRQTtFQUNJLG9DQUFBO0VBQ0Esa0JBQUE7RUFDQSxzQkFBQTtFQUNBLGVBQUE7RUFDQSx3QkFBQTtFQUNBLGdCQUFBO0FDTEoiLCJmaWxlIjoiZnJpZW5kLWNhcmQuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIqLFxyXG4qOjpiZWZvcmUsXHJcbio6OmFmdGVyIHtcclxuICAgIG1hcmdpbjogMDtcclxuICAgIHBhZGRpbmc6IDA7XHJcbiAgICBvdXRsaW5lOiAwO1xyXG4gICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcclxuICAgIHRleHQtZGVjb3JhdGlvbjogbm9uZTtcclxuICAgIGxpc3Qtc3R5bGU6IG5vbmU7XHJcbiAgICBib3JkZXI6IG5vbmU7XHJcblxyXG4gICAgZm9udC1mYW1pbHk6ICdSb2JvdG8nLCBzYW5zLXNlcmlmLCBBcmlhbCwgSGVsdmV0aWNhO1xyXG59XHJcblxyXG5cclxuXHJcbi5idG4ge1xyXG4gICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xyXG4gICAgcGFkZGluZzogdmFyKC0tYnRuLXBhZGRpbmcpO1xyXG4gICAgZm9udC13ZWlnaHQ6IDUwMDtcclxuICAgIGJvcmRlci1yYWRpdXM6IHZhcigtLWJvcmRlci1yYWRpdXMpO1xyXG4gICAgY3Vyc29yOiBwb2ludGVyO1xyXG4gICAgdHJhbnNpdGlvbjogYWxsIDMwMG1zIGVhc2U7XHJcbiAgICBmb250LXNpemU6IDAuOXJlbTtcclxufVxyXG5cclxuLmJ0bjpob3ZlcixcclxuLnByb2ZpbGUtcGljdHVyZTpob3ZlciB7XHJcbiAgICBvcGFjaXR5OiAwLjc1O1xyXG59XHJcblxyXG4uYnRuLXByaW1hcnkge1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tY29sb3ItcHJpbWFyeSk7XHJcbiAgICBjb2xvcjogd2hpdGU7XHJcbn1cclxuXHJcbi5idG4tc3VjY2VzcyB7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2IoMCwgMTc1LCAwKTtcclxuICAgIGNvbG9yOiB3aGl0ZTtcclxufVxyXG5cclxuLnByb2ZpbGUtcGljdHVyZSB7XHJcbiAgICB3aWR0aDogMi43cmVtO1xyXG4gICAgaGVpZ2h0OiAyLjdyZW07XHJcbiAgICBib3JkZXItcmFkaXVzOiA1MCU7XHJcbiAgICBvdmVyZmxvdzogaGlkZGVuO1xyXG4gICAgY3Vyc29yOiBwb2ludGVyO1xyXG4gICAgdHJhbnNpdGlvbjogYWxsIDMwMG1zIGVhc2U7XHJcblxyXG4gICAgaW1nIHtcclxuICAgICAgICB3aWR0aDogMTAwJTtcclxuICAgICAgICBoZWlnaHQ6IDEwMCU7XHJcbiAgICAgICAgb2JqZWN0LWZpdDogY292ZXI7XHJcbiAgICB9XHJcbn0iLCJAaW1wb3J0IHVybCgnLi4vc3R5bGVzLnNjc3MnKTtcclxuXHJcbi5mcmllbmQtY2FyZCB7XHJcbiAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgYm9yZGVyLXJhZGl1czogdmFyKC0tY2FyZC1ib3JkZXItcmFkaXVzKTtcclxuICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWNvbG9yLXdoaXRlKTtcclxuICAgIHBhZGRpbmc6IHZhcigtLWNhcmQtcGFkZGluZyk7XHJcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XHJcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG4gICAgbWFyZ2luLWJvdHRvbTogMXJlbTtcclxuXHJcbiAgICAucHJvZmlsZSB7XHJcbiAgICAgICAgZGlzcGxheTogZmxleDtcclxuICAgICAgICBnYXA6IDFyZW07XHJcbiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuICAgICAgICBmb250LXNpemU6IDFyZW07XHJcblxyXG4gICAgICAgIC5wcm9maWxlLXBpY3R1cmUge1xyXG4gICAgICAgICAgICBib3JkZXItcmFkaXVzOiAwLjVyZW07XHJcbiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWNvbG9yLWRhcmspO1xyXG4gICAgICAgICAgICB3aWR0aDogNXJlbTtcclxuICAgICAgICAgICAgaGVpZ2h0OiA1cmVtO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLmluZm8ge1xyXG4gICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XHJcbiAgICAgICAgICAgIHRyYW5zaXRpb246IDMwMG1zO1xyXG5cclxuICAgICAgICAgICAgJjpob3ZlciB7XHJcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLjc1O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAudGV4dC1tdXRlZCB7XHJcbiAgICAgICAgICAgIGZvbnQtc2l6ZTogMC44NXJlbTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbi5idG4ge1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tY29sb3ItbGlnaHQpO1xyXG4gICAgYm9yZGVyLXJhZGl1czogNTAlO1xyXG4gICAgcGFkZGluZzogMC4zcmVtIDAuNXJlbTtcclxuICAgIGZvbnQtc2l6ZTogMnJlbTtcclxuICAgIGNvbG9yOiB2YXIoLS1jb2xvci1kYXJrKTtcclxuICAgIGZvbnQtd2VpZ2h0OiA1MDA7XHJcbn0iLCJAaW1wb3J0IHVybChcIi4uL3N0eWxlcy5zY3NzXCIpO1xuLmZyaWVuZC1jYXJkIHtcbiAgZGlzcGxheTogZmxleDtcbiAgYm9yZGVyLXJhZGl1czogdmFyKC0tY2FyZC1ib3JkZXItcmFkaXVzKTtcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tY29sb3Itd2hpdGUpO1xuICBwYWRkaW5nOiB2YXIoLS1jYXJkLXBhZGRpbmcpO1xuICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIG1hcmdpbi1ib3R0b206IDFyZW07XG59XG4uZnJpZW5kLWNhcmQgLnByb2ZpbGUge1xuICBkaXNwbGF5OiBmbGV4O1xuICBnYXA6IDFyZW07XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIGZvbnQtc2l6ZTogMXJlbTtcbn1cbi5mcmllbmQtY2FyZCAucHJvZmlsZSAucHJvZmlsZS1waWN0dXJlIHtcbiAgYm9yZGVyLXJhZGl1czogMC41cmVtO1xuICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1jb2xvci1kYXJrKTtcbiAgd2lkdGg6IDVyZW07XG4gIGhlaWdodDogNXJlbTtcbn1cbi5mcmllbmQtY2FyZCAucHJvZmlsZSAuaW5mbyB7XG4gIGN1cnNvcjogcG9pbnRlcjtcbiAgdHJhbnNpdGlvbjogMzAwbXM7XG59XG4uZnJpZW5kLWNhcmQgLnByb2ZpbGUgLmluZm86aG92ZXIge1xuICBvcGFjaXR5OiAwLjc1O1xufVxuLmZyaWVuZC1jYXJkIC5wcm9maWxlIC50ZXh0LW11dGVkIHtcbiAgZm9udC1zaXplOiAwLjg1cmVtO1xufVxuXG4uYnRuIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tY29sb3ItbGlnaHQpO1xuICBib3JkZXItcmFkaXVzOiA1MCU7XG4gIHBhZGRpbmc6IDAuM3JlbSAwLjVyZW07XG4gIGZvbnQtc2l6ZTogMnJlbTtcbiAgY29sb3I6IHZhcigtLWNvbG9yLWRhcmspO1xuICBmb250LXdlaWdodDogNTAwO1xufSJdfQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["firstValueFrom","Friendship","User","i0","FriendCardComponent","constructor","router","userService","friendshipService","relationService","ngOnInit","friendship","Object","assign","id","userId","currentUser","friendId","getById","subscribe","data","user","getRelationship","update","getRelationshipBetweenUsers","relationIndex","status","onAddFriendButtonClick","addFriend","unFriend","navigateToWall","newFriendship","add","delete","navigateByUrl","selectors","inputs","showFriendButton","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["D:\\Code PJ\\SocialNetworkWebApp\\SocialNetworkWebApp-FE\\src\\app\\components\\friend-card\\friend-card.component.ts","D:\\Code PJ\\SocialNetworkWebApp\\SocialNetworkWebApp-FE\\src\\app\\components\\friend-card\\friend-card.component.html"],"sourcesContent":["import { Component, Input, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { firstValueFrom } from 'rxjs';\r\nimport { Friendship } from 'src/app/models/friendship.model';\r\nimport { User } from 'src/app/models/user.model';\r\nimport { FriendshipService } from 'src/app/services/friendship.service';\r\nimport { RelationService } from 'src/app/services/relation.service';\r\nimport { UserService } from 'src/app/services/user.service';\r\n\r\n@Component({\r\n  selector: 'app-friend-card',\r\n  templateUrl: './friend-card.component.html',\r\n  styleUrls: ['./friend-card.component.scss']\r\n})\r\nexport class FriendCardComponent implements OnInit {\r\n  @Input() friendship!: Friendship;\r\n  @Input() currentUser!: User;\r\n  @Input() showFriendButton: boolean = true;\r\n\r\n  user: User = new User();\r\n\r\n  icons: string[] = ['uil uil-user-plus', \"uil uil-user-times\", 'uil uil-user-check', \"uil uil-ban\", 'uil uil-user-exclamation'];\r\n  relationIndex = 0;\r\n\r\n  constructor(\r\n    private router: Router,\r\n    private userService: UserService,\r\n    private friendshipService: FriendshipService,\r\n    private relationService: RelationService) { }\r\n\r\n  ngOnInit(): void {\r\n    this.friendship = Object.assign(new Friendship(), this.friendship);\r\n\r\n    let id = this.friendship.userId === this.currentUser.id ? this.friendship.friendId : this.friendship.userId;\r\n    this.userService.getById(id).subscribe(data => this.user = data);\r\n\r\n    this.getRelationship(false);\r\n  }\r\n\r\n  async getRelationship(update: boolean): Promise<void> {\r\n    if (update) {\r\n      this.friendship = await firstValueFrom(\r\n        this.relationService.getRelationshipBetweenUsers(\r\n          this.user.id, this.currentUser.id));\r\n    }\r\n\r\n    this.relationIndex = this.friendship.status !== null ? (this.friendship.status + 1) : 0;\r\n    if (this.relationIndex === 1 && this.friendship.friendId === this.currentUser.id) {\r\n      this.relationIndex = 4;\r\n    }\r\n  }\r\n\r\n  onAddFriendButtonClick(): void {\r\n    switch (this.relationIndex) {\r\n      case 0: {\r\n        this.addFriend();\r\n        break;\r\n      }\r\n      case 1:\r\n      case 2:\r\n      case 3: {\r\n        this.unFriend();\r\n        break;\r\n      }\r\n      case 4: {\r\n        this.navigateToWall();\r\n        break;\r\n      }\r\n      default: break;\r\n    }\r\n  }\r\n\r\n  addFriend(): void {\r\n    if (this.currentUser) {\r\n      let newFriendship = new Friendship();\r\n      newFriendship.status = 0;\r\n      newFriendship.userId = this.currentUser.id;\r\n      newFriendship.friendId = this.user.id;\r\n\r\n      this.friendshipService.add(newFriendship).subscribe(data => this.relationIndex = 1);\r\n    }\r\n  }\r\n\r\n  unFriend(): void {\r\n    if (this.friendship) {\r\n      this.friendshipService.delete(this.friendship.id).subscribe(data => this.relationIndex = 0);\r\n    }\r\n  }\r\n\r\n  navigateToWall(): void {\r\n    if (this.currentUser) {\r\n      this.router.navigateByUrl(`home/wall/${this.user.id}`)\r\n    }\r\n  }\r\n}\r\n","<div class=\"friend-card\">\r\n    <div class=\"profile\">\r\n        <div class=\"profile-picture\">\r\n            <img [src]=\"this.user.getAvatar()\" (click)=\"navigateToWall()\" (error)=\"this.user.getDefaultAvatar()\" alt=\"\">\r\n        </div>\r\n        <div class=\"info\">\r\n            <div class=\"text-bold\" (click)=\"navigateToWall()\">{{user.getFullName()}}</div>\r\n            <div class=\"text-muted\">@{{user.getEmailPrefix()}}</div>\r\n        </div>\r\n    </div>\r\n\r\n    <div *ngIf=\"showFriendButton\">\r\n        <span class=\"btn\" (click)=\"onAddFriendButtonClick()\"><i [classList]=\"icons[this.relationIndex]\"></i></span>\r\n    </div>\r\n\r\n</div>"]},"metadata":{},"sourceType":"module"}